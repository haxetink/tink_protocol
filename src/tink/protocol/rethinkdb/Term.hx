package tink.protocol.rethinkdb;

import haxe.Json;
import haxe.io.Bytes;
import haxe.io.BytesOutput;

using tink.CoreApi;

class Term {
	public var type:TermType;
	public var datum:Datum;
	public var args:Array<Term>;
	public var optargs:Array<Named<Term>>;
	
	public function new(type:TermType, ?datum:Datum, ?args:Array<Term>, ?optargs:Array<Named<Term>>) {
		this.type = type;
		this.datum = datum;
		this.args = args;
		this.optargs = optargs;
	}
	
	public function toString() {
		return switch type {
			case DATUM:
				datum.toString();
			default:
				var opt = optargs == null ? '' : ',{' + [for(o in optargs) '"${o.name}":${o.value}'].join(',') + '}';
				'[$type,$args$opt]';
		}
	}
}

@:enum
abstract TermType(Int) from Int {
	var DATUM = 1;
	var MAKE_ARRAY = 2;
	var MAKE_OBJ = 3;
	var VAR = 10;
	var JAVASCRIPT = 11;
	var UUID = 169;
	var HTTP = 153;
	var ERROR = 12;
	var IMPLICIT_VAR = 13;
	var DB = 14;
	var TABLE = 15;
	var GET = 16;
	var GET_ALL = 78;
	var EQ = 17;
	var NE = 18;
	var LT = 19;
	var LE = 20;
	var GT = 21;
	var GE = 22;
	var NOT = 23;
	var ADD = 24;
	var SUB = 25;
	var MUL = 26;
	var DIV = 27;
	var MOD = 28;
	var FLOOR = 183;
	var CEIL = 184;
	var ROUND = 185;
	var APPEND = 29;
	var PREPEND = 80;
	var DIFFERENCE = 95;
	var SET_INSERT = 88;
	var SET_INTERSECTION = 89;
	var SET_UNION = 90;
	var SET_DIFFERENCE = 91;
	var SLICE = 30;
	var SKIP = 70;
	var LIMIT = 71;
	var OFFSETS_OF = 87;
	var CONTAINS = 93;
	var GET_FIELD = 31;
	var KEYS = 94;
	var VALUES = 186;
	var OBJECT = 143;
	var HAS_FIELDS = 32;
	var WITH_FIELDS = 96;
	var PLUCK = 33;
	var WITHOUT = 34;
	var MERGE = 35;
	var BETWEEN_DEPRECATED = 36;
	var BETWEEN = 182;
	var REDUCE = 37;
	var MAP = 38;
	var FOLD = 187;
	var FILTER = 39;
	var CONCAT_MAP = 40;
	var ORDER_BY = 41;
	var DISTINCT = 42;
	var COUNT = 43;
	var IS_EMPTY = 86;
	var UNION = 44;
	var NTH = 45;
	var BRACKET = 170;
	var INNER_JOIN = 48;
	var OUTER_JOIN = 49;
	var EQ_JOIN = 50;
	var ZIP = 72;
	var RANGE = 173;
	var INSERT_AT = 82;
	var DELETE_AT = 83;
	var CHANGE_AT = 84;
	var SPLICE_AT = 85;
	var COERCE_TO = 51;
	var TYPE_OF = 52;
	var UPDATE = 53;
	var DELETE = 54;
	var REPLACE = 55;
	var INSERT = 56;
	var DB_CREATE = 57;
	var DB_DROP = 58;
	var DB_LIST = 59;
	var TABLE_CREATE = 60;
	var TABLE_DROP = 61;
	var TABLE_LIST = 62;
	var CONFIG = 174;
	var STATUS = 175;
	var WAIT = 177;
	var RECONFIGURE = 176;
	var REBALANCE = 179;
	var SYNC = 138;
	var GRANT = 188;
	var INDEX_CREATE = 75;
	var INDEX_DROP = 76;
	var INDEX_LIST = 77;
	var INDEX_STATUS = 139;
	var INDEX_WAIT = 140;
	var INDEX_RENAME = 156;
	var SET_WRITE_HOOK = 189;
	var GET_WRITE_HOOK = 190;
	var FUNCALL = 64;
	var BRANCH = 65;
	var OR = 66;
	var AND = 67;
	var FOR_EACH = 68;
	var FUNC = 69;
	var ASC = 73;
	var DESC = 74;
	var INFO = 79;
	var MATCH = 97;
	var UPCASE = 141;
	var DOWNCASE = 142;
	var SAMPLE = 81;
	var DEFAULT = 92;
	var JSON = 98;
	var TO_JSON_STRING = 172;
	var ISO8601 = 99;
	var TO_ISO8601 = 100;
	var EPOCH_TIME = 101;
	var TO_EPOCH_TIME = 102;
	var NOW = 103;
	var IN_TIMEZONE = 104;
	var DURING = 105;
	var DATE = 106;
	var TIME_OF_DAY = 126;
	var TIMEZONE = 127;
	var YEAR = 128;
	var MONTH = 129;
	var DAY = 130;
	var DAY_OF_WEEK = 131;
	var DAY_OF_YEAR = 132;
	var HOURS = 133;
	var MINUTES = 134;
	var SECONDS = 135;
	var TIME = 136;
	var MONDAY = 107;
	var TUESDAY = 108;
	var WEDNESDAY = 109;
	var THURSDAY = 110;
	var FRIDAY = 111;
	var SATURDAY = 112;
	var SUNDAY = 113;
	var JANUARY = 114;
	var FEBRUARY = 115;
	var MARCH = 116;
	var APRIL = 117;
	var MAY = 118;
	var JUNE = 119;
	var JULY = 120;
	var AUGUST = 121;
	var SEPTEMBER = 122;
	var OCTOBER = 123;
	var NOVEMBER = 124;
	var DECEMBER = 125;
	var LITERAL = 137;
	var GROUP = 144;
	var SUM = 145;
	var AVG = 146;
	var MIN = 147;
	var MAX = 148;
	var SPLIT = 149;
	var UNGROUP = 150;
	var RANDOM = 151;
	var CHANGES = 152;
	var ARGS = 154;
	var BINARY = 155;
	var GEOJSON = 157;
	var TO_GEOJSON = 158;
	var POINT = 159;
	var LINE = 160;
	var POLYGON = 161;
	var DISTANCE = 162;
	var INTERSECTS = 163;
	var INCLUDES = 164;
	var CIRCLE = 165;
	var GET_INTERSECTING = 166;
	var FILL = 167;
	var GET_NEAREST = 168;
	var POLYGON_SUB = 171;
	var MINVAL = 180;
	var MAXVAL = 181;
}